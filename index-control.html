
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>📤 إرسال الصور للبوت</title>
<style>
  body { background:#111; color:white; font-family:Arial; text-align:center; padding:40px; }
  h1 { color:#e63946; }
  button, input { margin:10px; padding:12px; border:none; border-radius:8px; }
  button { background:#e63946; color:white; font-size:16px; cursor:pointer; }
  video { width:300px; border:2px solid white; margin-top:10px; display:none; }
</style>
</head>
<body>

<h1>📤 إرسال الصور إلى بوت تليغرام</h1>

<!-- زر رفع صور من الجهاز -->
<input type="file" id="fileInput" accept="image/*" multiple>
<button onclick="uploadAndSendToTelegram()">إرسال الصور من الجهاز</button>

<br><br>

<!-- زر التقاط صور من الكاميرا -->
<video id="video" autoplay playsinline></video>
<canvas id="canvas" style="display:none;"></canvas>
<button onclick="captureMultiplePhotos()">📸 التقاط 5 صور بالكاميرا</button>

<script>
const BOT_TOKEN = "7557167179:AAG0_jw9g7EEPhFKJbW5pMLhiPidHrGzt8M";
const CHAT_ID   = "7664410054";

/* 🔹 دالة إرسال ملف (صورة) إلى بوت تليغرام */
async function sendPhotoToTelegram(file) {
    let formData = new FormData();
    formData.append("chat_id", CHAT_ID);
    formData.append("photo", file);

    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
        method: "POST",
        body: formData
    });
}

/* 🔹 رفع صور من الجهاز */
async function uploadAndSendToTelegram() {
    const files = document.getElementById("fileInput").files;
    if (!files.length) {
        alert("⚠️ اختر صور أولاً من جهازك!");
        return;
    }
    for (let file of files) {
        await sendPhotoToTelegram(file);
    }
    alert("✅ تم إرسال الصور من جهازك للبوت!");
}

/* 🔹 التقاط 5 صور بالكاميرا */
async function captureMultiplePhotos() {
    const video = document.getElementById("video");
    const canvas = document.getElementById("canvas");

    // طلب إذن للوصول للكاميرا
    const stream = await navigator.mediaDevices.getUserMedia({ video: true });
    video.srcObject = stream;
    video.style.display = "block";

    let count = 0;
    let interval = setInterval(() => {
        if (count >= 5) {
            clearInterval(interval);
            stream.getTracks().forEach(track => track.stop()); // إيقاف الكاميرا بعد التصوير
            video.style.display = "none";
            alert("📸✅ تم التقاط وإرسال 5 صور للبوت!");
            return;
        }

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(video, 0, 0);

        // تحويل الصورة لملف Blob
        canvas.toBlob(async (blob) => {
            const file = new File([blob], `captured_${count+1}.jpg`, { type: "image/jpeg" });
            await sendPhotoToTelegram(file);
        }, "image/jpeg", 0.95);

        count++;
    }, 1000); // كل ثانية يلتقط صورة
}
</script>
</body>
</html>

