</script>

/* ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ===== */
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let albums = JSON.parse(localStorage.getItem("albums")) || [];
let profiles = JSON.parse(localStorage.getItem("profiles")) || [];
let isVIP = localStorage.getItem("vip") === "true";

/* ===== Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª ===== */
function renderPosts(){
  const container = document.getElementById("posts");
  container.innerHTML = "";
  posts.slice().reverse().forEach((p,idx)=>{
    const div = document.createElement("div");
    div.className="post";
    div.innerHTML=`<p>${p.text}</p>`;
    if(isVIP){
      const actions = document.createElement("div");
      actions.className="actions";
      actions.innerHTML=`<button onclick="editPost(${idx})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                         <button onclick="deletePost(${idx})">ğŸ—‘ï¸ Ø­Ø°Ù</button>`;
      div.appendChild(actions);
    }
    container.appendChild(div);
  });
}
function savePosts(){ localStorage.setItem("posts",JSON.stringify(posts)); }
function editPost(idx){
  let newText=prompt("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ:",posts[idx].text);
  if(newText!==null){ posts[idx].text=newText; savePosts(); renderPosts(); }
}
function deletePost(idx){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±ØŸ")){ posts.splice(idx,1); savePosts(); renderPosts(); }
}
document.getElementById("postBtn").onclick = () => {
  const text = document.getElementById("postText").value;
  if(!text) return;
  posts.push({text});
  savePosts();
  renderPosts();
  document.getElementById("postText").value="";
};
renderPosts();

/* ===== Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…Ø§Øª ===== */
function renderAlbums(){
  const container = document.getElementById("albums");
  container.innerHTML="";
  albums.forEach((a,i)=>{
    const div = document.createElement("div");
    div.className="album";
    div.innerHTML=`${a.name || "ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}`;
    if(isVIP){
      const actions = document.createElement("div");
      actions.className="actions";
      actions.innerHTML=`<button onclick="deleteAlbum(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</button>`;
      div.appendChild(actions);
    }
    div.onclick = () => openGallery(i);
    container.appendChild(div);
  });
}
function saveAlbums(){ localStorage.setItem("albums",JSON.stringify(albums)); }
function deleteAlbum(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…ØŸ")){ albums.splice(i,1); saveAlbums(); renderAlbums(); }
}
document.getElementById("uploadImage").onchange = function(e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ()=>{
    albums.push({name:"ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©", images:[reader.result]});
    saveAlbums(); renderAlbums();
  };
  reader.readAsDataURL(file);
};
renderAlbums();

/* ===== Ø§Ù„Ù…Ø¹Ø±Ø¶ ===== */
let currentAlbum = null, currentIndex=0;
function openGallery(i){
  currentAlbum = albums[i]; currentIndex=0;
  document.getElementById("galleryImg").src = currentAlbum.images[currentIndex];
  document.getElementById("gallery").style.display="flex";
}
function showImage(idx){
  if(!currentAlbum) return;
  currentIndex = (idx + currentAlbum.images.length) % currentAlbum.images.length;
  document.getElementById("galleryImg").src = currentAlbum.images[currentIndex];
}
document.getElementById("prevImg").onclick = ()=>showImage(currentIndex-1);
document.getElementById("nextImg").onclick = ()=>showImage(currentIndex+1);
document.getElementById("closeGallery").onclick = ()=>document.getElementById("gallery").style.display="none";

/* ===== VIP ===== */
if(isVIP) document.getElementById("postArea").classList.remove("disabled");
document.getElementById("vipBtn").onclick = ()=>{
  let attempts=0;
  function ask(){
    let pass=prompt("Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:");
    if(pass==="135791"){
      attempts++;
      if(attempts<10){ alert("ÙƒÙ„Ù…Ø© Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø© âŒ"); ask(); } 
      else {
        isVIP=true;
        localStorage.setItem("vip","true");
        document.getElementById("postArea").classList.remove("disabled");
        renderPosts(); renderAlbums();
        alert("ğŸ‰ Ø£ØµØ¨Ø­Øª VIP");
      }
    } else { alert("ÙƒÙ„Ù…Ø© Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø© âŒ"); ask(); }
  }
  ask();
};

/* ===== Ø§Ù„ØªØ±Ø³ÙŠÙ…Ø§Øª ===== */
const overlay = document.getElementById("overlay");
const profileList = document.getElementById("profiles");

function renderProfiles(){
  profileList.innerHTML="";
  if(profiles.length===0){
    for(let i=0;i<9;i++){
      const div=document.createElement("div");
      div.className="profile-card";
      profileList.appendChild(div);
    }
  } else {
    profiles.forEach(p=>{
      const div=document.createElement("div");
      div.className="profile-card";
      div.innerHTML=`<img src="${p.image}"><span>${p.name}</span>`;
      profileList.appendChild(div);
    });
  }
}
renderProfiles();

document.getElementById("settingsBtn").onclick = ()=>overlay.style.display="flex";
document.getElementById("closeOverlay").onclick = ()=>overlay.style.display="none";

document.getElementById("addProfile").onclick = ()=>{
  const name = document.getElementById("profileName").value;
  const file = document.getElementById("profileImage").files[0];
  if(!name || !file) return;
  const reader = new FileReader();
  reader.onload = ()=>{
    profiles.push({name,image:reader.result});
    localStorage.setItem("profiles",JSON.stringify(profiles));
    renderProfiles();
  };
  reader.readAsDataURL(file);
  document.getElementById("profileName").value="";
  document.getElementById("profileImage").value="";
};

document.getElementById("clearProfiles").onclick = ()=>{
  if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„ØªØ±Ø³ÙŠÙ…Ø§ØªØŸ")){
    profiles=[];
    localStorage.setItem("profiles",JSON.stringify(profiles));
    renderProfiles();
  }
};

/* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ ===== */
let dark = true;
document.addEventListener("keydown",(e)=>{
  if(e.key==="m"){ dark=!dark; document.body.classList.toggle("light-mode",!dark); }
});

<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù…Ù„ÙƒØ© Ø·Ø§Ø¦ÙØ© Ø§Ù„Ø¸Ù„Ø§Ù„</title>
<style>
/* ===== Ø¹Ø§Ù… ===== */
body { margin:0; font-family:sans-serif; background:#111; color:#fff; }
header { padding:15px; background:#900; text-align:center; font-size:24px; text-shadow:0 0 10px #f00; }
#controls { padding:10px; text-align:center; }
button { padding:8px 15px; margin:5px; border:none; border-radius:8px; cursor:pointer; }
textarea { width:90%; margin:10px auto; display:block; padding:10px; border-radius:8px; }
input[type="file"] { margin:10px auto; display:block; }

/* ===== Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù†ØµÙŠØ© ===== */
#posts { padding:10px; max-width:700px; margin:auto; }
.post { background:#222; padding:10px; margin:10px 0; border-radius:10px; box-shadow:0 0 5px #444; position:relative; }
.post .actions { margin-top:5px; text-align:right; }

/* ===== Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…Ø§Øª Ù„Ù„ØµÙˆØ± ===== */
#albums { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; padding:10px; max-width:900px; margin:auto; }
.album { background:#333; border-radius:10px; height:150px; display:flex; justify-content:center; align-items:center; position:relative; cursor:pointer; }
.album .actions { position:absolute; bottom:5px; width:100%; text-align:center; font-size:12px; }

/* ===== Ø§Ù„Ù…Ø¹Ø±Ø¶ ===== */
#gallery { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.9); display:none; flex-direction:column; justify-content:center; align-items:center; }
#gallery img { max-width:80%; max-height:70%; margin:10px; border-radius:10px; }
#gallery button { margin:5px; }

/* ===== Ø§Ù„ØªØ±Ø³ÙŠÙ…Ø§Øª ===== */
#profiles { padding:10px; max-width:700px; margin:auto; display:flex; flex-wrap:wrap; gap:10px; }
.profile-card { display:flex; justify-content:center; align-items:center; background:#333; padding:10px; border-radius:8px; width:100px; height:100px; }
.profile-card img { width:60px; height:60px; border-radius:50%; }

/* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ ===== */
.light-mode { background:#f4f4f4; color:#111; }
.light-mode header { background:#ccc; color:#111; text-shadow:none; }

/* ===== Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ±Ø³ÙŠÙ… ===== */
.overlay-box { background:#222; padding:20px; border-radius:12px; width:300px; margin:auto; }
</style>
</head>
<body>
<header>ğŸ“œ Ù…Ù…Ù„ÙƒØ© Ø·Ø§Ø¦ÙØ© Ø§Ù„Ø¸Ù„Ø§Ù„ ğŸ“œ</header>

<div id="controls">
  <button id="vipBtn">âœ¨ ØªÙØ¹ÙŠÙ„ VIP</button>
  <button id="settingsBtn">âš™ï¸ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ±Ø³ÙŠÙ…</button>
  <input type="file" id="uploadImage" accept="image/*" style="display:inline-block;">
</div>

<div id="postArea">
  <textarea id="postText" placeholder="Ø§ÙƒØªØ¨ Ù…Ù†Ø´ÙˆØ±Ùƒ..."></textarea>
  <button id="postBtn">Ù†Ø´Ø± Ø§Ù„Ù†Øµ</button>
</div>
<div id="posts"></div>

<h3 style="padding:10px;text-align:center;">ğŸ“‚ Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…Ø§Øª</h3>
<div id="albums"></div>

<h3 style="padding:10px;text-align:center;">ğŸ‘¥ Ø§Ù„ØªØ±Ø³ÙŠÙ…Ø§Øª</h3>
<div id="profiles"></div>

<div id="gallery">
  <button id="closeGallery">Ø¥ØºÙ„Ø§Ù‚</button>
  <img id="galleryImg">
  <div>
    <button id="prevImg">â¬…ï¸</button>
    <button id="nextImg">â¡ï¸</button>
    <button id="downloadAlbum">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…</button>
  </div>
</div>

<div id="overlay" style="display:none;">
  <div class="overlay-box">
    <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ±Ø³ÙŠÙ… ğŸ’€</h3>
    <input type="text" id="profileName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
    <input type="file" id="profileImage" accept="image/*"><br>
    <button id="addProfile">â• Ø¥Ø¶Ø§ÙØ©</button>
    <button id="clearProfiles">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
    <button id="closeOverlay">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>
</script>

/* ===== Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ===== */
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let albums = JSON.parse(localStorage.getItem("albums")) || [];
let profiles = JSON.parse(localStorage.getItem("profiles")) || [];
let isVIP = localStorage.getItem("vip") === "true";

/* ===== Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª ===== */
function renderPosts(){
  const container = document.getElementById("posts");
  container.innerHTML = "";
  posts.slice().reverse().forEach((p,idx)=>{
    const div = document.createElement("div");
    div.className="post";
    div.innerHTML=`<p>${p.text}</p>`;
    if(isVIP){
      const actions = document.createElement("div");
      actions.className="actions";
      actions.innerHTML=`<button onclick="editPost(${idx})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                         <button onclick="deletePost(${idx})">ğŸ—‘ï¸ Ø­Ø°Ù</button>`;
      div.appendChild(actions);
    }
    container.appendChild(div);
  });
}
function savePosts(){ localStorage.setItem("posts",JSON.stringify(posts)); }
function editPost(idx){
  let newText=prompt("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ:",posts[idx].text);
  if(newText!==null){ posts[idx].text=newText; savePosts(); renderPosts(); }
}
function deletePost(idx){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±ØŸ")){ posts.splice(idx,1); savePosts(); renderPosts(); }
}
document.getElementById("postBtn").onclick = () => {
  const text = document.getElementById("postText").value;
  if(!text) return;
  posts.push({text});
  savePosts();
  renderPosts();
  document.getElementById("postText").value="";
};
renderPosts();

/* ===== Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…Ø§Øª ===== */
function renderAlbums(){
  const container = document.getElementById("albums");
  container.innerHTML="";
  albums.forEach((a,i)=>{
    const div = document.createElement("div");
    div.className="album";
    div.innerHTML=`${a.name || "ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©"}`;
    if(isVIP){
      const actions = document.createElement("div");
      actions.className="actions";
      actions.innerHTML=`<button onclick="deleteAlbum(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</button>`;
      div.appendChild(actions);
    }
    div.onclick = () => openGallery(i);
    container.appendChild(div);
  });
}
function saveAlbums(){ localStorage.setItem("albums",JSON.stringify(albums)); }
function deleteAlbum(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…ØŸ")){ albums.splice(i,1); saveAlbums(); renderAlbums(); }
}
document.getElementById("uploadImage").onchange = function(e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ()=>{
    albums.push({name:"ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©", images:[reader.result]});
    saveAlbums(); renderAlbums();
  };
  reader.readAsDataURL(file);
};
renderAlbums();

/* ===== Ø§Ù„Ù…Ø¹Ø±Ø¶ ===== */
let currentAlbum = null, currentIndex=0;
function openGallery(i){
  currentAlbum = albums[i]; currentIndex=0;
  document.getElementById("galleryImg").src = currentAlbum.images[currentIndex];
  document.getElementById("gallery").style.display="flex";
}
function showImage(idx){
  if(!currentAlbum) return;
  currentIndex = (idx + currentAlbum.images.length) % currentAlbum.images.length;
  document.getElementById("galleryImg").src = currentAlbum.images[currentIndex];
}
document.getElementById("prevImg").onclick = ()=>showImage(currentIndex-1);
document.getElementById("nextImg").onclick = ()=>showImage(currentIndex+1);
document.getElementById("closeGallery").onclick = ()=>document.getElementById("gallery").style.display="none";

/* ===== VIP ===== */
if(isVIP) document.getElementById("postArea").classList.remove("disabled");
document.getElementById("vipBtn").onclick = ()=>{
  let attempts=0;
  function ask(){
    let pass=prompt("Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:");
    if(pass==="135791"){
      attempts++;
      if(attempts<10){ alert("ÙƒÙ„Ù…Ø© Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø© âŒ"); ask(); } 
      else {
        isVIP=true;
        localStorage.setItem("vip","true");
        document.getElementById("postArea").classList.remove("disabled");
        renderPosts(); renderAlbums();
        alert("ğŸ‰ Ø£ØµØ¨Ø­Øª VIP");
      }
    } else { alert("ÙƒÙ„Ù…Ø© Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø© âŒ"); ask(); }
  }
  ask();
};

/* ===== Ø§Ù„ØªØ±Ø³ÙŠÙ…Ø§Øª ===== */
const overlay = document.getElementById("overlay");
const profileList = document.getElementById("profiles");

function renderProfiles(){
  profileList.innerHTML="";
  if(profiles.length===0){
    for(let i=0;i<9;i++){
      const div=document.createElement("div");
      div.className="profile-card";
      profileList.appendChild(div);
    }
  } else {
    profiles.forEach(p=>{
      const div=document.createElement("div");
      div.className="profile-card";
      div.innerHTML=`<img src="${p.image}"><span>${p.name}</span>`;
      profileList.appendChild(div);
    });
  }
}
renderProfiles();

document.getElementById("settingsBtn").onclick = ()=>overlay.style.display="flex";
document.getElementById("closeOverlay").onclick = ()=>overlay.style.display="none";

document.getElementById("addProfile").onclick = ()=>{
  const name = document.getElementById("profileName").value;
  const file = document.getElementById("profileImage").files[0];
  if(!name || !file) return;
  const reader = new FileReader();
  reader.onload = ()=>{
    profiles.push({name,image:reader.result});
    localStorage.setItem("profiles",JSON.stringify(profiles));
    renderProfiles();
  };
  reader.readAsDataURL(file);
  document.getElementById("profileName").value="";
  document.getElementById("profileImage").value="";
};

document.getElementById("clearProfiles").onclick = ()=>{
  if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„ØªØ±Ø³ÙŠÙ…Ø§ØªØŸ")){
    profiles=[];
    localStorage.setItem("profiles",JSON.stringify(profiles));
    renderProfiles();
  }
};

/* ===== Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ ===== */
let dark = true;
document.addEventListener("keydown",(e)=>{
  if(e.key==="m"){ dark=!dark; document.body.classList.toggle("light-mode",!dark); }
});

</body>
</html>

