
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>موقع النشر</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    direction: rtl;
    background: linear-gradient(-45deg, purple, red, violet, purple);
    background-size: 400% 400%;
    animation: gradientShift 10s ease infinite;
    color: white;
  }
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  header {
    text-align: center;
    padding: 20px;
  }
  .btn {
    background: rgba(0,0,0,0.8);
    border: none;
    padding: 10px 15px;
    margin: 5px;
    color: white;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
  }
  .btn:hover { background: rgba(255,0,0,0.7); }
  #vip-status {
    display: inline-block;
    padding: 5px 15px;
    border-radius: 20px;
    background: gray;
    margin: 10px;
    transition: 0.3s;
  }
  #vip-status.active { background: gold; color: black; }
  .posts {
    display: flex;
    flex-wrap: wrap-reverse; /* يجعل الجديد يطلع للأعلى */
    gap: 10px;
    padding: 20px;
    justify-content: center;
  }
  .post {
    background: rgba(0,0,0,0.5);
    border-radius: 10px;
    overflow: hidden;
    padding: 5px;
    width: 30%;
    min-width: 200px;
    animation: slideUp 0.5s ease;
  }
  @keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  .post img, .post video {
    width: 100%;
    border-radius: 8px;
  }
  .interactions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 5px;
  }
  .reaction-btn {
    cursor: pointer;
    margin: 0 2px;
  }
  .comments {
    margin-top: 5px;
    background: rgba(255,255,255,0.1);
    padding: 5px;
    border-radius: 5px;
    font-size: 0.8rem;
    max-height: 150px;
    overflow-y: auto;
  }
</style>
</head>
<body>

<header>
  <button class="btn" onclick="registerUser()">تسجيل</button>
  <button class="btn" onclick="createUser()">إنشاء</button>
  <button class="btn" onclick="promptPost()">📷 نشر صور / 🎥 فيديو / GIF</button>
  <span id="vip-status">VIP</span>
  <button class="btn" onclick="vipLeft()">🔒 يسار</button>
  <button class="btn" onclick="vipRight()">🔒 يمين</button>
</header>

<div class="posts" id="posts"></div>

<script>
let posts = JSON.parse(localStorage.getItem("posts") || "[]");
let currentUser = JSON.parse(localStorage.getItem("currentUser") || "null");
let vipCodeLeft = "";
let vipCodeRight = "";
let vipActive = false;

// تسجيل
function registerUser(){
  let name = prompt("اسم المستخدم:");
  let img = prompt("رابط صورة المستخدم:");
  if(name){
    currentUser = {name: name, img: img || "https://via.placeholder.com/50", vip: false};
    localStorage.setItem("currentUser", JSON.stringify(currentUser));
    alert("تم تسجيل الدخول");
  }
}

// إنشاء حساب
function createUser(){
  alert("هنا يمكن وضع كود إنشاء حساب جديد مع تحقق كلمات سر إذا أردت");
}

// إدخال أكواد VIP
function vipLeft(){
  vipCodeLeft = prompt("أدخل كلمة سر يسار:");
  checkVIP();
}
function vipRight(){
  vipCodeRight = prompt("أدخل كلمة سر يمين:");
  checkVIP();
}
function checkVIP(){
  if(vipCodeLeft === "111" && vipCodeRight === "222"){
    vipActive = true;
    document.getElementById("vip-status").classList.add("active");
    alert("VIP مفعّل ✅");
  }
}

// نشر
function promptPost(){
  if(!vipActive){
    alert("يجب أن تكون VIP للنشر أو الحذف");
    return;
  }
  let type = prompt("اكتب: image أو video أو gif");
  let url = prompt("ضع الرابط:");
  if(url){
    posts.push({type: type, url: url, user: currentUser, reactions: {}, comments: []});
    localStorage.setItem("posts", JSON.stringify(posts));
    renderPosts();
  }
}

// تفاعل
function reactToPost(index, emoji){
  let post = posts[index];
  if(!post.reactions[emoji]) post.reactions[emoji] = [];
  if(!currentUser) return alert("سجّل دخول أولاً");
  if(!post.reactions[emoji].includes(currentUser.name)){
    post.reactions[emoji].push(currentUser.name);
  }
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}

// تعليق
function commentOnPost(index){
  let text = prompt("اكتب تعليقك:");
  if(!text) return;
  if(text.includes("http") && !vipActive){
    alert("إضافة صور بالتعليق تتطلب VIP");
    return;
  }
  posts[index].comments.push({user: currentUser, text: text});
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}

// عرض
function renderPosts(){
  let container = document.getElementById("posts");
  container.innerHTML = "";
  posts.forEach((p,i)=>{
    let div = document.createElement("div");
    div.className = "post";
    if(p.type === "image" || p.type === "gif"){
      div.innerHTML = `<img src="${p.url}">`;
    } else if(p.type === "video"){
      div.innerHTML = `<video src="${p.url}" controls></video>`;
    }
    div.innerHTML += `
      <div class="interactions">
        <div>
          <span class="reaction-btn" onclick="reactToPost(${i},'💖')">💖</span>
          <span class="reaction-btn" onclick="reactToPost(${i},'😮')">😮</span>
          <span class="reaction-btn" onclick="reactToPost(${i},'😡')">😡</span>
          <span class="reaction-btn" onclick="reactToPost(${i},'😫')">😫</span>
          <span class="reaction-btn" onclick="reactToPost(${i},'🥵')">🥵</span>
        </div>
        <button class="btn" onclick="commentOnPost(${i})">💬 تعليق</button>
      </div>
      <div class="comments">
        <strong>${p.user?.name || "مجهول"}</strong><br>
        ${Object.entries(p.reactions).map(([emoji,users])=> `${emoji} ${users.length}`).join(" ")}
        <hr>
        ${p.comments.map(c=> `<div><img src="${c.user.img}" width="20" style="vertical-align:middle;border-radius:50%;"> <strong>${c.user.name}</strong>: ${c.text}</div>`).join("")}
      </div>
    `;
    container.appendChild(div);
  });
}

renderPosts();
</script>
</body>
</html>
